{{!
    This file is part of Moodle - https://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle. If not, see <https://www.gnu.org/licenses/>.

    Renders the user interface for interacting with the Prompt2Slide AI activity.

    @copyright  2026 Ananth B K <ananth.bk@ipath.io> (IntegrationPath India LLC)
    @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
}}

<div class="mod_pptgen">

  {{#hasnotification}}
    <div class="alert {{#notificationtype}}alert-{{notificationtype}}{{/notificationtype}}" role="alert">
      {{{notification}}}
    </div>
  {{/hasnotification}}

  <form method="post" action="" id="pptgen-form" class="mt-3">
    <input type="hidden" name="sesskey" value="{{sesskey}}">
    <input type="hidden" name="submitted" value="1">

    <div class="form-group">
      <label for="pptgen-prompt">{{#str}}prompt_label, pptgen{{/str}}</label>
      <textarea id="pptgen-prompt" class="form-control" name="prompt" required rows="6"></textarea>
    </div>

    <div class="form-group mt-3">
      <label for="pptgen-slides">{{#str}}slides_label, pptgen{{/str}}</label>
      <input id="pptgen-slides"
             class="form-control"
             type="number"
             name="slides"
             value="{{defaultslides}}"
             min="{{minslides}}"
             max="{{maxslides}}">
    </div>

    <div class="mt-3">
      <button id="submit-btn" type="submit" class="btn btn-primary">
        {{#str}}generate_btn, pptgen{{/str}}
      </button>
    </div>
  </form>

  <div id="loading-indicator" class="mt-3" style="display:none;">
    <div class="d-flex align-items-center" style="gap:10px;">
      <div class="spinner-border" role="status" aria-label="loading"></div>
      <span class="text-muted">{{#str}}loading_text, pptgen{{/str}}</span>
    </div>
  </div>

  {{#topicdisplay}}
    <div class="mt-3" style="font-weight:bold;">
      {{{topicdisplay}}}
    </div>
  {{/topicdisplay}}

  {{#hasdownload}}
    <div class="mt-2">
      <a class="btn btn-success" href="{{downloadurl}}">
        {{#str}}download_btn, pptgen{{/str}}
      </a>
    </div>
  {{/hasdownload}}

  {{#debugdata}}
    <pre class="mt-3" style="border:1px solid #ccc; padding:10px;">{{debugdata}}</pre>
  {{/debugdata}}

</div>
